name: todo_app infra workflow

on:
  push:
    branches:
      - 'main'

jobs:
  terraforminit:
    name: terraform initializationaca
    runs-on: raja:rana
    steps: 
    - name: Checkout to repo
      uses: actions/checkout@main
      
    - name: Install Terraform
      uses: little-core-labs/install-terraform@v2.0.0
      with:
        version: 1.13.0

    - name: Azure Login
      uses: Azure/login@v2.3.0
      with:
        # Paste output of `az ad sp create-for-rbac` as value of secret variable: AZURE_CREDENTIALS
         creds: ${{secrets.AZURE_CREDENTIALS}}
        
    - name: Terraform init azurerm backend
      # You may pin to the exact commit or the version.
      # uses: ahmedig/terraform-azurerm-backend@65ed9d7f67790281b78670b7811d63d96f5e22ec
      uses: ahmedig/terraform-azurerm-backend@v4
      with:
        # Azure Credentials in JSON format
        azure_credentials: ${{secrets.AZURE_CREDENTIALS}}
        resource_group_name: Test
        container_name: teeraformtfstate
        storage_account_name: backendversioning
        file_name: versioning
              
        
    
        
       
